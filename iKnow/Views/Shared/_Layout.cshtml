@using System.Security.Claims
@using Microsoft.AspNetCore.Http

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto:100,200,300,400,500,600,700" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href="/favicon.png" />
    <title>@ViewBag.Title - iKnow</title>
    <environment include="Development">
        <link rel="stylesheet" href="~/css/site.bundle.css" asp-append-version="true" />
    </environment>
    <environment exclude="Development">
        <link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true" />
    </environment>
    <script src="~/lib/modernizr-2.6.2.js" type="text/javascript"></script>
</head>
<body>
    <div class="navbar box-shadow">
        <div class="content-container">
            @Html.Partial("_NavbarPartial")
        </div>
    </div>
    <div class="main">
        <div class="content-container">
            @RenderBody()
        </div>
    </div>
    @RenderSection("footer", required: false)

    <div class="modal-container">
    </div>

    <div class="warning"></div>

    <div class="back-top-container hide">
        <a class="back-top" title="Back to top">
            <div class="arrow"></div>
            <div class="stick"></div>
        </a>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation/dist/additional-methods.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="~/lib/quill.min.js" asp-append-version="true"></script>
    <script src="~/lib/chosen.jquery.js" asp-append-version="true"></script>
    <script src="~/lib/chosen.proto.js" asp-append-version="true"></script>

    <environment include="Development">
        <script src="~/js/site.bundle.js" type="text/javascript"></script>
    </environment>
    <environment exclude="Development">
        <script src="~/js/site.min.js" type="text/javascript"></script>
    </environment>

    <script>
    // iknow global variable
    var iknow = {};
    iknow.isUserAuthorized = "@(Context.User.Identity.IsAuthenticated)" === "True" ? true : false;
    iknow.userId = "@(Context.User?.FindFirstValue(ClaimTypes.NameIdentifier) ?? "")";
    iknow.pageError = "@(TempData["pageError"] ?? "")";
    iknow.statusMessage = "@(TempData["statusMessage"] ?? "")";

    $(document)
        .ready(function () {
            appController.init();
        });
    </script>

    @RenderSection("scripts", required: false)
</body>
</html>
